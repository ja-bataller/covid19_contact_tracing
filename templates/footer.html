{% load static %}

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<!-- Account Settings Modal -->
<div class="modal fade" id="accountsettingsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"><i class="fas fa-lock"></i> Change Password</h5>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="exampleInputPassword1">Old Password</label>
                        <input type="password" class="form-control" id="oldClientPassword">
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">New Password</label>
                        <input type="password" class="form-control" id="newClientPassword">
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">Confirm Password</label>
                        <input type="password" class="form-control" id="confirmClientPassword">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn" style="background-color: #57CC99; color: white;">Save
                    changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
            </div>
            <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
            <div class="modal-footer">
                <button id="cancelBtn" class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                <a id="logoutBtn" class="btn" href="{% url 'logout'%}"
                    style="background-color: #FF7878; color: white;">Logout</a>

                <button id="logoutSpinner" class="btn" type="button" style="background-color: #FF7878; color: white; display: none;"
                    disabled>
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    Logging out...
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap core JavaScript-->
<script src="{% static '/vendor/jquery/jquery.min.js' %}"></script>
<script src="{% static '/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

<!-- Core plugin JavaScript-->
<script src="{% static '/vendor/jquery-easing/jquery.easing.min.js' %}"></script>

<!-- Custom scripts for all pages-->
<script src="{% static '/js/sb-admin-2.min.js' %}"></script>

<!-- Page level plugins -->
<script src="{% static '/vendor/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static '/vendor/datatables/dataTables.bootstrap4.min.js' %}"></script>

<!-- Page level custom scripts -->
<script src="{% static '/js/demo/datatables-demo.js' %}"></script>

<!-- Page level custom scripts -->
<script src="{% static '/js/demo/datatables-demo.js' %}"></script>

<!-- WOW.js -->
<script src="{% static '/js/wow.min.js' %}"></script>
<script>
    new WOW().init();
</script>

<!-- Bootstrap core JS CDN-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Script link-->
<script src="{% static '/js/signin_signup.js' %}"></script>
<script src="{% static '/js/qrcode.js' %}"></script>
<script src="{% static '/js/qr-generator.js' %}"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js" integrity="sha512-Zq9o+E00xhhR/7vJ49mxFNJ0KQw1E1TMWkPTxrWcnpfEFDEXgUiwJHIKit93EW/XxE31HSI5GEOW06G6BF1AtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.min.css" integrity="sha512-O03ntXoVqaGUTAeAmvQ2YSzkCvclZEcPQu1eqloPaHfJ5RuNGiS4l+3duaidD801P50J28EHyonCV06CUlTSag==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<script>
    let logoutBtn = document.querySelector("#logoutBtn")
    let logoutSpinner = document.querySelector("#logoutSpinner")
    let cancelBtn = document.querySelector("#cancelBtn")

    logoutBtn.addEventListener("click", function () {
        logoutBtn.style.display = "none";
        logoutSpinner.style.display = "block";
        cancelBtn.setAttribute("disabled", true);
    });
</script>

<!-- QR Code Generator -->
<script>
    let idnumber = document.querySelector("#idnumber").innerHTML;
    let typeNumber = 4;
    let errorCorrectionLevel = 'L';
    let qr = qrcode(typeNumber, errorCorrectionLevel);

    qr.addData(idnumber);
    qr.make();
    document.querySelector("#qrcodegeneratedImage").innerHTML = qr.createImgTag(8, 4);

    const downloadImageBtn = document.querySelector('#downloadImageBtn');

    downloadImageBtn.addEventListener('click', function (e) {
        const link = document.querySelector('#qrcodegeneratedImage img').src;
        const user = document.querySelector("#fullNameofUser");

        downloadImageBtn.href = link;
        downloadImageBtn.download = user.dataset.filename;

    });
</script>